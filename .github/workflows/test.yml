name: Test

on:
  push:
    paths: .github/workflows/test.yml

jobs:

  build:
    name: Build
    runs-on: ubuntu-latest
    steps:

    - name: Checkout
      uses: actions/checkout@v3.0.2
      with:
        repository: aerotoad/Thud

    - name: Prerequisites
      run: npm install -g @ionic/cli

    - name: Add Android platform if it doesn't exist
      run: npx cap add android

    - name: Build project and sync with capacitor platforms
      run: ionic cap sync

    - name: Open native Android project in Android Studio
      run: npx cap open android

    - run: ls -R .
      if: always()
